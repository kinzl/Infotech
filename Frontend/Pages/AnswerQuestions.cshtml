@page
@using System.Text.Json.Serialization
@using System.Reflection.Metadata
@model Questionnaire_Frontend.Pages.AnswerQuestions;
@{
}
<!DOCTYPE html>
<html lang="">
<head>
    <title>AnswerQuestions</title>
    <link href="files/answerquestions/styles.css" type="text/css" rel="stylesheet"/>
</head>
<body>

<div id="base">

    @* <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script> *@
    @* <script type="text/javascript"> *@
    @* window.onload = callMyCSharpMethod(); *@
    @*     function callMyCSharpMethod() { *@
    @*         var input = "John"; // Input parameter for the C# method *@
    @*         $.ajax({ *@
    @*             type: "POST", *@
    @*             url: "AnswerQuestions?handler=MyCSharpMethod", // URL of the Razor Page *@
    @*             data: { "input": input }, // Input data as key-value pair *@
    @*             success: function (response) { *@
    @*                 // Success callback function *@
    @*                 var result = response; // Extract the result from the response *@
    @*                 alert(result); // Display the result in an alert *@
    @*             }, *@
    @*             error: function (xhr, textStatus, errorThrown) { *@
    @*                 // Error callback function *@
    @*                 alert("Error: " + errorThrown); *@
    @*             } *@
    @*         }); *@
    @*     } *@
    @* </script> *@
    @* *@

    <script>
            window.onload = function() {
    
                let questions = @Html.Raw(Json.Serialize(Model.Question));
    
                
                //console.log("****************************");
                for(let i = 0; i < questions.length; i++) {
    
                    console.log(questions[i].toString());
                }
    
                let numberOfGeneratedDiv = questions.length;
                let numberOfRadioButtons = 5;
                let lastDivTagValue = 0;
    
                for (let j = 0; j < numberOfGeneratedDiv; j++) {
                    //DivContainer
                    let div = document.createElement("div");
                    div.id = "radioButtonContainer" + j;
                    div.className = "radio_button_group";
                    let marginTopVal = (j * 500);
                    div.style.marginTop = marginTopVal + "px";
                    document.body.appendChild(div);
    
                    //Criticality
                    let criticality = document.createElement("label");
                    criticality.id = "criticality" + j;
                    criticality.className = "criticality";
                    criticality.textContent = "Criticality xy";
                    document.getElementById("radioButtonContainer" + j).appendChild(criticality);
    
                    //Question
                    let question = document.createElement("label");
                    question.id = "question" + j;
                    question.className = "question";
                    question.textContent = questions[j];
                    document.getElementById("radioButtonContainer" + j).appendChild(question);
    
                    //Categorie
                    let categorie = document.createElement("label");
                    categorie.id = "categorie" + j;
                    categorie.className = "categorie";
                    categorie.textContent = "Categorie XY";
                    document.getElementById("radioButtonContainer" + j).appendChild(categorie);
    
                    //Radio Buttons
                    for (let i = 0; i < numberOfRadioButtons; i++) {
                        var radioButton1 = document.createElement("input");
                        radioButton1.type = "radio";
                        radioButton1.name = "radioGroup" + j;
                        if (i === 0) {
                            radioButton1.value = "  n.A.";
                            radioButton1.checked = true;
                        } else {
                            radioButton1.value = (i - 1) + "  Any text";
                        }
    
                        radioButton1.id = "radioButton" + (j + 1) + (i + 1);
    
                        let label1 = document.createElement("label");
                        label1.htmlFor = radioButton1.id;
                        label1.innerHTML = radioButton1.value;
    
                        document.getElementById("radioButtonContainer" + j).appendChild(radioButton1);
                        document.getElementById("radioButtonContainer" + j).appendChild(label1);
                        document.getElementById("radioButtonContainer" + j).appendChild(document.createElement("br"));
                    }
    
                    //Reason
                    let reason = document.createElement("textarea");
                    reason.id = "reason" + j;
                    reason.className = "textAreaGroup";
                    reason.placeholder = "Reason";
                    document.getElementById("radioButtonContainer" + j).appendChild(reason);
    
                    lastDivTagValue = j;
                }
            //nextButton
                let next = document.createElement("button");
                next.id = "buttonNext";
                next.className = "buttonNext";
                next.textContent = "Next";
            // button.onClick = "RedirectToAnswerQuestionsExtended";
                document.getElementById("radioButtonContainer" + (lastDivTagValue)).appendChild(next);
                next.onclick = function () {
                    location.href = "AnswerQuestionsExtended";
                }
            }
    
    </script>

    <div>
        <img id="infotechLogo" src="images/InfotechLogo.png" class="img-fluid" alt="Responsive image">
    </div>
    <div>
        <form method="post" asp-page-handler="CompanyName"></form>
        <input type="text" class="companyName" name="companyName" placeholder="Company name"/>
        <input type="submit" class="testBtn" value="MyButton"/>
    </div>

    <select class="dropdown comboBox">
        <option selected>@Model.SecurityCheckType[0]</option>
        @for (int i = 1; i < @Model.SecurityCheckType.Count; i++)
        {
            <option>@Model.SecurityCheckType[i]</option>
        }
    </select>

    <input id="saveButton" type="button" value="Save" asp-page-handler="Any"/>

    @* Generate Questions dynamically *@
    @* <script src="js/AnswerQuestionsGeneratedTags.js" asp-append-version="true"></script> *@


</div>

</body>
</html>